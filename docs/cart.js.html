<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: cart.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: cart.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.getTotal = exports.getShipping = exports.getTaxes = exports.getSubtotalWithCoupon = exports.getSubtotal = void 0;
var constants_1 = require("./constants");
var coupon_1 = require("./coupon");
var product_1 = require("./product");
/**
 * Given a cart, return it's subtotal (pre-tax, pre-coupon, pre-shipping)
 * @param cart
 */
var getSubtotal = function (cart) {
    var subtotal = cart.reduce(function (acc, product) {
        return acc + product_1.getPrice(product) * product_1.getQuantity(product);
    }, 0);
    return subtotal;
};
exports.getSubtotal = getSubtotal;
/**
 * Given a cart and coupon, returns the subtotal
 * Note: Shipping is discounted after
 * @param cart
 * @param coupon
 */
var getSubtotalWithCoupon = function (cart, coupon) {
    var subtotal = exports.getSubtotal(cart);
    var couponValue = coupon_1.getCouponValue(subtotal, coupon);
    return subtotal - couponValue;
};
exports.getSubtotalWithCoupon = getSubtotalWithCoupon;
/**
 * Given a subtotal, calculates taxes for it
 * @param subtotal
 */
var getTaxes = function (cart) { return exports.getSubtotal(cart) * constants_1.TAXES; };
exports.getTaxes = getTaxes;
/**
 * Given a cart and shipping coupon return the shippign cost
 * @param cart
 */
var getShipping = function (cart, coupon) {
    if (coupon_1.isFreeShippingCoupon(coupon)) {
        return 0;
    }
    return exports.getSubtotal(cart) &lt; constants_1.SHIPPING_THRESHOLD ? constants_1.SHIPPING_COST : 0;
};
exports.getShipping = getShipping;
/**
 * Given a cart and TODO a coupon, return the total price including taxes, coupon and shipping
 * @param cart
 */
var getTotal = function (cart, coupon) {
    var subtotal = exports.getSubtotalWithCoupon(cart, coupon);
    var taxes = exports.getTaxes(cart);
    var shipping = exports.getShipping(cart, coupon);
    return Math.round((subtotal + taxes + shipping) * 100) / 100;
};
exports.getTotal = getTotal;
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#getCouponValue">getCouponValue</a></li><li><a href="global.html#getPrice">getPrice</a></li><li><a href="global.html#getQuantity">getQuantity</a></li><li><a href="global.html#getShipping">getShipping</a></li><li><a href="global.html#getSubtotal">getSubtotal</a></li><li><a href="global.html#getSubtotalWithCoupon">getSubtotalWithCoupon</a></li><li><a href="global.html#getTaxes">getTaxes</a></li><li><a href="global.html#getTotal">getTotal</a></li><li><a href="global.html#isFreeShippingCoupon">isFreeShippingCoupon</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.6</a> on Sun Feb 21 2021 18:21:49 GMT+0100 (Central European Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
